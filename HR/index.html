<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HR Dashboard - Job Applications</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
    /* Modern HR Dashboard CSS */
:root {
  /* Color Palette */
  --primary-50: #f5f3ff;
  --primary-100: #ede9fe;
  --primary-200: #ddd6fe;
  --primary-300: #c4b5fd;
  --primary-400: #a78bfa;
  --primary-500: #8b5cf6;
  --primary-600: #7c3aed;
  --primary-700: #6d28d9;
  --primary-800: #5b21b6;
  --primary-900: #4c1d95;
  
  --secondary-50: #f0f9ff;
  --secondary-100: #e0f2fe;
  --secondary-200: #bae6fd;
  --secondary-300: #7dd3fc;
  --secondary-400: #38bdf8;
  --secondary-500: #0ea5e9;
  --secondary-600: #0284c7;
  --secondary-700: #0369a1;
  --secondary-800: #075985;
  --secondary-900: #0c4a6e;
  
  --success-50: #f0fdf4;
  --success-100: #dcfce7;
  --success-200: #bbf7d0;
  --success-300: #86efac;
  --success-400: #4ade80;
  --success-500: #22c55e;
  --success-600: #16a34a;
  --success-700: #15803d;
  --success-800: #166534;
  --success-900: #14532d;
  
  --warning-50: #fffbeb;
  --warning-100: #fef3c7;
  --warning-200: #fde68a;
  --warning-300: #fcd34d;
  --warning-400: #fbbf24;
  --warning-500: #f59e0b;
  --warning-600: #d97706;
  --warning-700: #b45309;
  --warning-800: #92400e;
  --warning-900: #78350f;
  
  --error-50: #fef2f2;
  --error-100: #fee2e2;
  --error-200: #fecaca;
  --error-300: #fca5a5;
  --error-400: #f87171;
  --error-500: #ef4444;
  --error-600: #dc2626;
  --error-700: #b91c1c;
  --error-800: #991b1b;
  --error-900: #7f1d1d;
  
  --gray-50: #f9fafb;
  --gray-100: #f3f4f6;
  --gray-200: #e5e7eb;
  --gray-300: #d1d5db;
  --gray-400: #9ca3af;
  --gray-500: #6b7280;
  --gray-600: #4b5563;
  --gray-700: #374151;
  --gray-800: #1f2937;
  --gray-900: #111827;
  
  --surface-0: #ffffff;
  --surface-50: #f9fafb;
  --surface-100: #f3f4f6;
  --surface-200: #e5e7eb;
  
  /* Shadows */
  --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
  --shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px -1px rgba(0, 0, 0, 0.1);
  --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1);
  --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.1);
  --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1);
  --shadow-2xl: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
  
  /* Border Radius */
  --radius-sm: 0.25rem;
  --radius: 0.5rem;
  --radius-md: 0.75rem;
  --radius-lg: 1rem;
  --radius-xl: 1.5rem;
  --radius-full: 9999px;
  
  /* Transitions */
  --transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  --transition-slow: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  --transition-bounce: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
}

/* Base Styles */
* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

html {
  scroll-behavior: smooth;
}

body {
  font-family: 'Inter', 'Plus Jakarta Sans', -apple-system, BlinkMacSystemFont, 
               'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
  background-color: var(--surface-50);
  color: var(--gray-800);
  line-height: 1.6;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  min-height: 100vh;
}

/* Typography */
h1, h2, h3, h4, h5, h6 {
  font-weight: 700;
  line-height: 1.3;
  color: var(--gray-900);
}

a {
  text-decoration: none;
  color: var(--primary-600);
  transition: var(--transition);
}

a:hover {
  color: var(--primary-800);
}

/* Layout */
.container {
  max-width: 1440px;
  margin: 0 auto;
  padding: 0 1.5rem;
}

/* Header */
.header {
  background: linear-gradient(135deg, var(--primary-600), var(--primary-800));
  color: white;
  padding: 1.75rem 2rem;
  border-radius: 0 0 var(--radius-xl) var(--radius-xl);
  box-shadow: var(--shadow-lg);
  margin-bottom: 2.5rem;
  position: relative;
  overflow: hidden;
}

.header::before {
  content: '';
  position: absolute;
  top: -50%;
  right: -20%;
  width: 60%;
  height: 200%;
  background: radial-gradient(circle, rgba(255,255,255,0.15) 0%, transparent 70%);
  transform: rotate(30deg);
  z-index: 0;
}

.header-title {
    color: white;
  font-size: 1.75rem;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.75rem;
  position: relative;
  z-index: 1;
}

.header-title i {
  font-size: 1.5rem;
}

/* Glass Card */
.glass-card {
  background: rgba(255, 255, 255, 0.95);
  backdrop-filter: blur(16px);
  -webkit-backdrop-filter: blur(16px);
  border: 1px solid rgba(255, 255, 255, 0.3);
  box-shadow: var(--shadow-md);
  padding: 1.75rem;
  border-radius: var(--radius-lg);
  margin-bottom: 2rem;
  transition: var(--transition-slow);
}

.glass-card:hover {
  box-shadow: var(--shadow-xl);
  transform: translateY(-3px);
}

/* Flex Container */
.flex-container {
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  align-items: flex-start;
  gap: 1.25rem;
}

@media (min-width: 768px) {
  .flex-container {
    flex-direction: row;
    align-items: center;
  }
}

/* Input Group */
.input-group {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  background-color: var(--surface-0);
  padding: 0.75rem 1.25rem;
  border-radius: var(--radius);
  border: 1px solid var(--gray-200);
  box-shadow: var(--shadow-sm);
  transition: var(--transition);
}

.input-group:focus-within {
  border-color: var(--primary-500);
  box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.2);
}

.input-label {
  color: var(--gray-600);
  font-weight: 500;
  display: flex;
  align-items: center;
  gap: 0.5rem;
  font-size: 0.875rem;
}

.input-label i {
  color: var(--primary-500);
}

.form-input {
  border: none;
  color: var(--gray-700);
  padding: 0.375rem 0.5rem;
  outline: none;
  font-size: 0.875rem;
  background: transparent;
  min-width: 220px;
  font-family: inherit;
}

.form-input::placeholder {
  color: var(--gray-400);
}

.form-select {
  border: none;
  color: var(--gray-700);
  padding: 0.375rem 1.5rem 0.375rem 0.5rem;
  outline: none;
  background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
  background-position: right 0.5rem center;
  background-repeat: no-repeat;
  background-size: 1.25em;
  appearance: none;
  font-size: 0.875rem;
  cursor: pointer;
  background-color: transparent;
  font-family: inherit;
}

/* Stats Box */
.stats-box {
  color: var(--gray-600);
  background-color: var(--surface-0);
  padding: 0.875rem 1.5rem;
  border-radius: var(--radius);
  border: 1px solid var(--gray-200);
  box-shadow: var(--shadow-sm);
  display: flex;
  align-items: center;
  gap: 0.75rem;
  font-size: 0.875rem;
  font-weight: 500;
  transition: var(--transition);
}

.stats-box:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow);
}

.stats-box i {
  color: var(--primary-500);
  font-size: 1.1rem;
}

.stats-box span {
  font-weight: 600;
  color: var(--primary-700);
}

/* Table Styles */
.table-container {
  background: var(--surface-0);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-md);
  overflow: hidden;
  transition: var(--transition-slow);
  margin-bottom: 2rem;
}

.table-container:hover {
  box-shadow: var(--shadow-xl);
}

table {
  width: 100%;
  border-collapse: collapse;
  display: table;
}

thead {
  display: table-header-group;
  background: linear-gradient(to right, var(--primary-600), var(--primary-800));
  color: white;
}

th {
  padding: 1.25rem;
  font-weight: 600;
  font-size: 0.75rem;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  text-align: left;
  white-space: nowrap;
  position: relative;
}

th:not(:last-child)::after {
  content: '';
  position: absolute;
  right: 0;
  top: 50%;
  transform: translateY(-50%);
  height: 60%;
  width: 1px;
  background: rgba(255, 255, 255, 0.2);
}

th i {
  font-size: 0.875rem;
  margin-right: 0.5rem;
}

tbody tr {
  border-bottom: 1px solid var(--surface-200);
  transition: var(--transition);
}

tbody tr:last-child {
  border-bottom: none;
}

tbody tr:hover {
  background-color: var(--surface-50);
}

td {
  padding: 1.25rem;
  font-size: 0.875rem;
  color: var(--gray-700);
}

/* Status Badge */
.status-badge {
  display: inline-flex;
  align-items: center;
  gap: 0.375rem;
  padding: 0.375rem 0.875rem;
  border-radius: var(--radius-full);
  font-size: 0.75rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  box-shadow: var(--shadow-sm);
}

.status-pending {
  background-color: var(--warning-100);
  color: var(--warning-800);
  border: 1px solid var(--warning-200);
}

.status-accepted {
  background-color: var(--success-100);
  color: var(--success-800);
  border: 1px solid var(--success-200);
}

.status-rejected {
  background-color: var(--error-100);
  color: var(--error-800);
  border: 1px solid var(--error-200);
}

/* Action Buttons */
.action-btn {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.625rem 1.25rem;
  border-radius: var(--radius);
  font-weight: 500;
  font-size: 0.8125rem;
  transition: var(--transition-bounce);
  cursor: pointer;
  border: none;
  white-space: nowrap;
}

.action-btn:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow);
}

.action-btn i {
  font-size: 0.875rem;
}

.view-btn {
  background: linear-gradient(to right, var(--primary-50), var(--primary-100));
  color: var(--primary-700);
  border: 1px solid var(--primary-200);
}

.view-btn:hover {
  background: linear-gradient(to right, var(--primary-100), var(--primary-200));
}

.accept-btn {
  background: linear-gradient(to right, var(--success-50), var(--success-100));
  color: var(--success-700);
  border: 1px solid var(--success-200);
}

.accept-btn:hover {
  background: linear-gradient(to right, var(--success-100), var(--success-200));
}

.reject-btn {
  background: linear-gradient(to right, var(--error-50), var(--error-100));
  color: var(--error-700);
  border: 1px solid var(--error-200);
}

.reject-btn:hover {
  background: linear-gradient(to right, var(--error-100), var(--error-200));
}

.close-btn {
  background: linear-gradient(to right, var(--surface-50), var(--surface-100));
  color: var(--gray-700);
  border: 1px solid var(--gray-200);
}

.close-btn:hover {
  background: linear-gradient(to right, var(--surface-100), var(--surface-200));
}

/* Pagination */
.pagination {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 0.75rem;
  margin-top: 1.5rem;
}

.pagination-button {
  padding: 0.5rem 1rem;
  background-color: var(--surface-100);
  color: var(--gray-600);
  border-radius: var(--radius);
  cursor: pointer;
  transition: var(--transition);
  border: 1px solid var(--gray-200);
  font-size: 0.875rem;
  font-weight: 500;
  display: flex;
  align-items: center;
  gap: 0.375rem;
}

.pagination-button:hover:not(:disabled) {
  background-color: var(--surface-200);
  color: var(--gray-700);
  border-color: var(--gray-300);
}

.pagination-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.pagination-info {
  padding: 0.5rem 1rem;
  color: var(--gray-600);
  font-size: 0.875rem;
}

/* Modal Styles */
.modal {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(15, 23, 42, 0.7);
  z-index: 1000;
  align-items: center;
  justify-content: center;
  animation: fadeIn 0.3s ease-in-out;
  backdrop-filter: blur(4px);
  -webkit-backdrop-filter: blur(4px);
  padding: 1rem;
}

.modal-content {
  background-color: var(--surface-0);
  border-radius: var(--radius-xl);
  max-width: 900px;
  width: 100%;
  max-height: 90vh;
  overflow-y: auto;
  box-shadow: var(--shadow-2xl);
  padding: 2.5rem;
  animation: slideUp 0.3s ease-out;
  position: relative;
  border: none;
}

.modal-content h2 {
  font-size: 1.75rem;
  margin-bottom: 2rem;
  border-bottom: 1px solid var(--surface-200);
  padding-bottom: 1rem;
  display: flex;
  align-items: center;
  gap: 1rem;
}

.modal-content .close {
  position: absolute;
  top: 1.5rem;
  right: 1.5rem;
  font-size: 1.75rem;
  cursor: pointer;
  color: var(--gray-400);
  transition: var(--transition);
  background: none;
  border: none;
  width: 2.5rem;
  height: 2.5rem;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
}

.modal-content .close:hover {
  color: var(--gray-600);
  background-color: var(--surface-100);
}

/* Modal Header */
.modal-header {
  background: linear-gradient(to right, var(--primary-50), var(--primary-100));
  padding: 1.5rem;
  border-radius: var(--radius-lg);
  margin-bottom: 2rem;
  border-left: 4px solid var(--primary-500);
  position: relative;
  overflow: hidden;
}

.modal-header::before {
  content: '';
  position: absolute;
  top: -50%;
  right: -20%;
  width: 60%;
  height: 200%;
  background: radial-gradient(circle, rgba(255,255,255,0.15) 0%, transparent 70%);
  transform: rotate(30deg);
  z-index: 0;
}

.modal-header-title {
  font-size: 1.5rem;
  font-weight: 700;
  margin-bottom: 0.5rem;
  position: relative;
  z-index: 1;
}

.modal-header-date {
  color: var(--gray-500);
  font-size: 0.875rem;
  display: flex;
  align-items: center;
  gap: 0.5rem;
  position: relative;
  z-index: 1;
}

/* Status Indicator */
.status-indicator {
  padding: 0.5rem 1.25rem;
  border-radius: var(--radius-full);
  font-size: 0.8125rem;
  font-weight: 600;
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  box-shadow: var(--shadow-sm);
  border: 1px solid;
  position: relative;
  z-index: 1;
}

/* Grid Container */
.grid-container {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 1.75rem;
  margin-bottom: 1.5rem;
}

/* Card Styles */
.card {
  background-color: var(--surface-0);
  padding: 1.75rem;
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-sm);
  border: none;
  transition: var(--transition-slow);
  position: relative;
  overflow: hidden;
}

.card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 4px;
  height: 100%;
  background: linear-gradient(to bottom, var(--primary-500), var(--primary-600));
}

.card:hover {
  transform: translateY(-5px);
  box-shadow: var(--shadow-lg);
}

.card-title {
  font-size: 1.25rem;
  font-weight: 700;
  color: var(--gray-800);
  margin-bottom: 1.5rem;
  display: flex;
  align-items: center;
  gap: 0.75rem;
  position: relative;
  padding-bottom: 0.75rem;
}

.card-title::after {
  content: '';
  position: absolute;
  bottom: 0;
  left: 0;
  width: 40px;
  height: 3px;
  background: linear-gradient(to right, var(--primary-500), var(--primary-600));
  border-radius: 3px;
}

.card-title i {
  color: var(--primary-500);
  font-size: 1.25rem;
}

/* Preview Items */
.preview-item {
  margin-bottom: 1.25rem;
  padding-bottom: 1.25rem;
  border-bottom: 1px solid var(--surface-200);
  transition: var(--transition);
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.preview-item:hover {
  border-bottom-color: var(--primary-200);
}

.preview-item:last-child {
  border-bottom: none;
  margin-bottom: 0;
  padding-bottom: 0;
}

.preview-item strong {
  color: var(--gray-700);
  font-weight: 600;
  display: flex;
  align-items: center;
  gap: 0.75rem;
  font-size: 0.875rem;
}

.preview-item strong i {
  color: var(--primary-500);
  width: 1.25rem;
  height: 1.25rem;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--primary-50);
  border-radius: 50%;
  padding: 0.25rem;
  flex-shrink: 0;
}

.preview-item-content {
  margin-left: 2rem;
  color: var(--gray-600);
  line-height: 1.6;
  font-size: 0.875rem;
}

/* File Links */
.file-link {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.5rem 1rem;
  background: var(--primary-50);
  color: var(--primary-700);
  border-radius: var(--radius);
  text-decoration: none;
  transition: var(--transition-bounce);
  font-weight: 500;
  font-size: 0.875rem;
  border: 1px solid var(--primary-100);
}

.file-link:hover {
  background: var(--primary-100);
  color: var(--primary-800);
  transform: translateY(-2px);
  box-shadow: var(--shadow-sm);
}

.file-link i {
  font-size: 1rem;
}

/* File Preview */
.file-preview-container {
  margin-top: 1rem;
  border-radius: var(--radius);
  overflow: hidden;
  border: 1px solid var(--surface-200);
  box-shadow: var(--shadow-sm);
  max-width: 100%;
}

.file-preview-container img,
.file-preview-container embed {
  width: 100%;
  height: auto;
  display: block;
}

/* Action Buttons Container */
.action-buttons {
  display: flex;
  justify-content: flex-end;
  gap: 1rem;
  margin-top: 2rem;
  flex-wrap: wrap;
}

/* Utility Classes */
.hidden {
  display: none;
}

.notification {
  position: fixed;
  top: 1.5rem;
  right: 1.5rem;
  z-index: 1000;
  padding: 1rem 1.5rem;
  border-radius: var(--radius);
  box-shadow: var(--shadow-lg);
  display: flex;
  align-items: center;
  gap: 0.75rem;
  font-size: 0.875rem;
  font-weight: 500;
  animation: slideIn 0.3s ease-out;
  max-width: 400px;
}

.notification i {
  font-size: 1.25rem;
}

/* Scrollbar */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: var(--surface-100);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: var(--gray-300);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: var(--gray-400);
}

/* Animations */
@keyframes fadeIn {
  0% { opacity: 0; }
  100% { opacity: 1; }
}

@keyframes slideUp {
  0% { transform: translateY(20px); opacity: 0; }
  100% { transform: translateY(0); opacity: 1; }
}

@keyframes slideIn {
  0% { transform: translateX(100%); opacity: 0; }
  100% { transform: translateX(0); opacity: 1; }
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

/* Responsive Adjustments */
@media (max-width: 768px) {
  .header {
    padding: 1.5rem 1rem;
    border-radius: 0 0 var(--radius-lg) var(--radius-lg);
  }
  
  .header-title {
    font-size: 1.5rem;
  }
  
  .glass-card {
    padding: 1.5rem;
  }
  
  .modal-content {
    padding: 1.5rem;
    width: 95%;
  }
  
  .modal-content h2 {
    font-size: 1.5rem;
  }
  
  .preview-item strong {
    display: block;
    margin-bottom: 0.5rem;
  }
  
  .preview-item-content {
    margin-left: 0;
  }
  
  .action-buttons {
    justify-content: center;
  }
  
  .action-btn {
    width: 100%;
    justify-content: center;
  }
  
  .grid-container {
    grid-template-columns: 1fr;
  }
}

@media (max-width: 480px) {
  .container {
    padding: 0 1rem;
  }
  
  .input-group {
    width: 100%;
  }
  
  .form-input {
    min-width: 0;
    width: 100%;
  }
  
  .stats-box {
    width: 100%;
    justify-content: center;
  }
  
  th, td {
    padding: 0.75rem;
  }
}
 .file-upload-section {
            margin-top: 2rem;
            padding: 1.5rem;
            background-color: var(--success-50);
            border-radius: var(--radius-lg);
            border-left: 4px solid var(--success-500);
            display: none; /* Hidden by default */
        }

        .file-upload-section h3 {
            margin-bottom: 1rem;
            color: var(--success-700);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .file-upload-form {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .file-upload-label {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 2rem;
            border: 2px dashed var(--success-300);
            border-radius: var(--radius);
            background-color: var(--surface-0);
            cursor: pointer;
            transition: var(--transition);
        }

        .file-upload-label:hover {
            border-color: var(--success-500);
            background-color: var(--success-50);
        }

        .file-upload-icon {
            font-size: 2rem;
            color: var(--success-500);
            margin-bottom: 0.5rem;
        }

        .file-upload-text {
            text-align: center;
            color: var(--gray-600);
        }

        .file-upload-text span {
            color: var(--success-600);
            font-weight: 600;
        }

        .file-list {
            margin-top: 1rem;
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .file-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0.75rem 1rem;
            background-color: var(--surface-0);
            border-radius: var(--radius);
            border: 1px solid var(--surface-200);
        }

        .file-info {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .file-icon {
            color: var(--success-500);
        }

        .file-name {
            font-weight: 500;
            color: var(--gray-700);
        }

        .file-size {
            font-size: 0.75rem;
            color: var(--gray-500);
        }

        .file-actions {
            display: flex;
            gap: 0.5rem;
        }

        .file-download {
            color: var(--primary-500);
            cursor: pointer;
        }

        .file-delete {
            color: var(--error-500);
            cursor: pointer;
        }
        .notification {
  position: fixed;
  top: 1.5rem;
  right: 1.5rem;
  z-index: 1000;
  padding: 1rem 1.5rem;
  border-radius: var(--radius);
  box-shadow: var(--shadow-lg);
  display: flex;
  align-items: center;
  gap: 0.75rem;
  font-size: 0.875rem;
  font-weight: 500;
  animation: slideIn 0.3s ease-out;
  max-width: 400px;
  color: white;
}

.notification.success {
  background-color: var(--success-600);
  border-left: 4px solid var(--success-400);
}

.notification.error {
  background-color: var(--error-600);
  border-left: 4px solid var(--error-400);
}

.notification.warning {
  background-color: var(--warning-600);
  border-left: 4px solid var(--warning-400);
}

.notification.info {
  background-color: var(--secondary-600);
  border-left: 4px solid var(--secondary-400);
}

.notification i {
  font-size: 1.25rem;
}
</style>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1 class="header-title">
                <i class="fas fa-briefcase"></i> HR Applications 
            </h1>
        </header>

        <div id="errorContainer" class="hidden"></div>

        <div class="glass-card">
            <div class="flex-container">
                <div style="display: flex; align-items: center; gap: 1rem; flex-wrap: wrap;">
                    <div class="input-group">
                        <label for="searchInput" class="input-label">
                            <i class="fas fa-search"></i> Search:
                        </label>
                        <input id="searchInput" type="text" class="form-input" placeholder="Name, email, or phone">
                    </div>
                    <div class="input-group">
                        <label for="statusFilter" class="input-label">
                            <i class="fas fa-filter"></i> Status:
                        </label>
                        <select id="statusFilter" class="form-select">
                            <option value="all">All Applications</option>
                            <option value="Pending">Pending Review</option>
                            <option value="Accepted">Accepted</option>
                            <option value="Rejected">Rejected</option>
                        </select>
                    </div>
                </div>
                <div class="stats-box">
                    <i class="fas fa-file-alt"></i>
                    Total Applications: <span id="totalApplications">0</span>
                </div>
            </div>
        </div>

        <div class="table-container">
            <table>
                <thead>
                    <tr>
                        <th><i class="fas fa-user"></i><span>Candidate</span></th>
                        <th><i class="fas fa-phone"></i><span>Phone</span></th>
                        <th><i class="fas fa-envelope"></i><span>Email</span></th>
                        <th><i class="fas fa-calendar-day"></i><span>Date</span></th>
                        <th><i class="fas fa-tag"></i><span>Status</span></th>
                        <th><i class="fas fa-cog"></i><span>Actions</span></th>
                    </tr>
                </thead>
                <tbody id="applicationsTable">
                    <tr>
                        <td colspan="6" class="loading-message">
                            <i class="fas fa-spinner"></i> Loading applications...
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div id="paginationControls" class="pagination"></div>

        <!-- Modal for Application Details -->
        <div id="applicationModal" class="modal">
            <div class="modal-content">
                <button class="close" onclick="closeModal()">Ã—</button>
                <h2><i class="fas fa-file-invoice"></i> Application Details</h2>
                <div id="modalContent" style="margin-bottom: 1rem;"></div>
                
                <!-- File Upload Section (shown only for accepted applications) -->
                <div id="fileUploadSection" class="file-upload-section">
                    <h3><i class="fas fa-file-upload"></i> Upload Offer Documents</h3>
                    <form id="fileUploadForm" class="file-upload-form">
                        <input type="file" id="fileInput" style="display: none;" multiple>
                        <label for="fileInput" class="file-upload-label">
                            <i class="fas fa-cloud-upload-alt file-upload-icon"></i>
                            <div class="file-upload-text">
                                <p>Drag & drop files here or click to browse</p>
                                <p><span>Supported formats:</span> PDF, DOCX, JPG, PNG (Max 10MB each)</p>
                            </div>
                        </label>
                        <div id="fileList" class="file-list"></div>
                        <button type="button" id="uploadBtn" class="action-btn accept-btn" style="align-self: flex-end;">
                            <i class="fas fa-upload"></i> Upload Files
                        </button>
                    </form>
                </div>
                
                <!-- Uploaded Files Section -->
                <div id="uploadedFilesSection" class="file-upload-section" style="background-color: var(--primary-50); border-left-color: var(--primary-500);">
                    <h3><i class="fas fa-file-download"></i> Uploaded Documents</h3>
                    <div id="uploadedFilesList" class="file-list"></div>
                </div>

                <div style="margin-top: 2rem; display: flex; justify-content: flex-end; gap: 0.75rem; flex-wrap: wrap;">
                    <button id="acceptBtn" class="action-btn accept-btn">
                        <i class="fas fa-check-circle"></i> Accept Application
                    </button>
                    <button id="rejectBtn" class="action-btn reject-btn">
                        <i class="fas fa-times-circle"></i> Reject Application
                    </button>
                    <button onclick="closeModal()" class="action-btn close-btn">
                        <i class="fas fa-times"></i> Close
                    </button>
                </div>
            </div>
        </div>
    </div>
<script>
  // DOM Elements
  const searchInput = document.getElementById('searchInput');
  const statusFilter = document.getElementById('statusFilter');
  const applicationsTable = document.getElementById('applicationsTable');
  const totalApplications = document.getElementById('totalApplications');
  const paginationControls = document.getElementById('paginationControls');
  const applicationModal = document.getElementById('applicationModal');
  const modalContent = document.getElementById('modalContent');
  const acceptBtn = document.getElementById('acceptBtn');
  const rejectBtn = document.getElementById('rejectBtn');
  const fileUploadSection = document.getElementById('fileUploadSection');
  const fileUploadForm = document.getElementById('fileUploadForm');
  const fileInput = document.getElementById('fileInput');
  const fileList = document.getElementById('fileList');
  const uploadedFilesSection = document.getElementById('uploadedFilesSection');
  const uploadedFilesList = document.getElementById('uploadedFilesList');
  const uploadBtn = document.getElementById('uploadBtn');
  const errorContainer = document.getElementById('errorContainer');

  // Constants from server.js
  const BASE_URL = 'http://16.170.248.164:3068';

  // State
  let currentPage = 1;
  let currentLimit = 10;
  let currentApplicationId = null;
  let selectedFiles = [];

function showNotification(message, type = 'success') {
  const notification = document.createElement('div');
  notification.className = `notification ${type}`;
  notification.innerHTML = `
    <i class="fas fa-${
      type === 'success' ? 'check-circle' : 
      type === 'error' ? 'exclamation-circle' : 
      type === 'warning' ? 'exclamation-triangle' : 
      'info-circle'
    }"></i>
    ${message}
  `;
  document.body.appendChild(notification);
  setTimeout(() => notification.remove(), 5000);
}

  function showError(message) {
    errorContainer.innerHTML = `
        <div class="notification error">
            <i class="fas fa-exclamation-circle"></i> ${message}
        </div>
    `;
    errorContainer.classList.remove('hidden');
    setTimeout(() => errorContainer.classList.add('hidden'), 5000);
  }

  function formatDate(isoDate) {
    return new Date(isoDate).toLocaleDateString('en-US', {
      year: 'numeric',
      month: 'short',
      day: 'numeric',
    });
  }

  function formatFileSize(bytes) {
    if (bytes === 0) return '0 Bytes';
    const k = 1024;
    const sizes = ['Bytes', 'KB', 'MB', 'GB'];
    const i = Math.floor(Math.log(bytes) / Math.log(k));
    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
  }

  function getFileIcon(fileName) {
    const extension = fileName.split('.').pop().toLowerCase();
    const icons = {
      pdf: 'file-pdf',
      doc: 'file-word',
      docx: 'file-word',
      jpg: 'file-image',
      jpeg: 'file-image',
      png: 'file-image',
    };
    return icons[extension] || 'file';
  }

  // Fetch Applications
  async function fetchApplications(page = 1, limit = 10) {
    try {
      const search = searchInput.value.trim();
      const status = statusFilter.value;
      const response = await fetch(
        `${BASE_URL}/api/applications?page=${page}&limit=${limit}&search=${encodeURIComponent(search)}&status=${status}`,
        {
          method: 'GET',
          headers: { 'Content-Type': 'application/json' },
        }
      );
      const data = await response.json();

      if (!response.ok) throw new Error(data.error || 'Failed to fetch applications');

      renderApplications(data.applications);
      totalApplications.textContent = data.total;
      renderPagination(data.total, page, limit);
      currentPage = page;
    } catch (error) {
      console.error('Error fetching applications:', error);
      showError('Failed to load applications: ' + error.message);
    }
  }

  // Render Applications Table
  function renderApplications(applications) {
    applicationsTable.innerHTML = '';
    if (applications.length === 0) {
      applicationsTable.innerHTML = `
        <tr>
          <td colspan="6" style="text-align: center; padding: 2rem;">
            <i class="fas fa-info-circle"></i> No applications found
          </td>
        </tr>
      `;
      return;
    }

    applications.forEach((app) => {
      const row = document.createElement('tr');
      row.innerHTML = `
        <td>${app.personal_info.name}</td>
        <td>${app.personal_info.phone}</td>
        <td>${app.personal_info.email}</td>
        <td>${formatDate(app.date)}</td>
        <td>
          <span class="status-badge status-${app.status.toLowerCase()}">
            <i class="fas fa-circle"></i> ${app.status}
          </span>
        </td>
        <td>
          <button class="action-btn view-btn" onclick="viewApplication(${app.id}, '${app.status}')">
            <i class="fas fa-eye"></i> View
          </button>
        </td>
      `;
      applicationsTable.appendChild(row);
    });
  }

  // Render Pagination
  function renderPagination(total, page, limit) {
    const totalPages = Math.ceil(total / limit);
    paginationControls.innerHTML = `
      <button class="pagination-button" ${page === 1 ? 'disabled' : ''} onclick="fetchApplications(${page - 1})">
        <i class="fas fa-chevron-left"></i> Previous
      </button>
      <span class="pagination-info">Page ${page} of ${totalPages}</span>
      <button class="pagination-button" ${page === totalPages ? 'disabled' : ''} onclick="fetchApplications(${page + 1})">
        Next <i class="fas fa-chevron-right"></i>
      </button>
    `;
  }

  // View Application Details
  async function viewApplication(id, status) {
    try {
      currentApplicationId = id;
      const response = await fetch(`${BASE_URL}/api/applications?page=1&limit=1&search=id:${id}`);
      const data = await response.json();
      if (!response.ok || data.applications.length === 0) {
        throw new Error(data.error || 'Application not found');
      }

      const app = data.applications[0];
      renderModalContent(app);
      updateButtonVisibility(status);
      fileUploadSection.style.display = status === 'Accepted' ? 'block' : 'none';
      uploadedFilesSection.style.display = 'block';
      await fetchUploadedFiles(id);
      applicationModal.style.display = 'flex';
    } catch (error) {
      console.error('Error viewing application:', error);
      showError('Failed to load application details: ' + error.message);
    }
  }

  // Render Modal Content
  function renderModalContent(app) {
    const { personal_info, education, work_experience, documents } = app;
    const workExpHtml = work_experience.hasExperience
      ? `
        <div class="preview-item">
          <strong><i class="fas fa-building"></i> Most Recent Employer:</strong>
          <div class="preview-item-content">${work_experience.company || 'Not provided'}</div>
        </div>
        <div class="preview-item">
          <strong><i class="fas fa-user-tie"></i> Job Title:</strong>
          <div class="preview-item-content">${work_experience.role || 'Not provided'}</div>
        </div>
        <div class="preview-item">
          <strong><i class="fas fa-calendar"></i> Employment Period:</strong>
          <div class="preview-item-content">
            ${work_experience.startDate ? formatDate(work_experience.startDate) : 'Not provided'}
            ${work_experience.endDate ? ' to ' + formatDate(work_experience.endDate) : ''}
          </div>
        </div>
        <div class="preview-item">
          <strong><i class="fas fa-clock"></i> Employment Type:</strong>
          <div class="preview-item-content">${work_experience.employmentType || 'Not provided'}</div>
        </div>
        <div class="preview-item">
          <strong><i class="fas fa-tasks"></i> Responsibilities:</strong>
          <div class="preview-item-content">${work_experience.responsibilities || 'Not provided'}</div>
        </div>
      `
      : `
        <div class="preview-item">
          <strong><i class="fas fa-briefcase"></i> Work Experience:</strong>
          <div class="preview-item-content">None</div>
        </div>
      `;

    const educationHtml = `
      <div class="preview-item">
        <strong><i class="fas fa-file-alt"></i> SSC Documents:</strong>
        <div class="preview-item-content">
          ${education.ssc.documents.length > 0
            ? education.ssc.documents
                .map(
                  (doc) => `
            <a href="${doc.path}" class="file-link" target="_blank"><i class="fas fa-file"></i> ${doc.name}</a>
          `
                )
                .join('')
            : 'None uploaded'}
        </div>
      </div>
      <div class="preview-item">
        <strong><i class="fas fa-file-alt"></i> Intermediate Documents:</strong>
        <div class="preview-item-content">
          ${education.intermediate.documents.length > 0
            ? education.intermediate.documents
                .map(
                  (doc) => `
            <a href="${doc.path}" class="file-link" target="_blank"><i class="fas fa-file"></i> ${doc.name}</a>
          `
                )
                .join('')
            : 'None uploaded'}
        </div>
      </div>
      <div class="preview-item">
        <strong><i class="fas fa-file-alt"></i> Highest Qualification Documents:</strong>
        <div class="preview-item-content">
          ${education.qualificationDocuments.length > 0
            ? education.qualificationDocuments
                .map(
                  (doc) => `
            <a href="${doc.path}" class="file-link" target="_blank"><i class="fas fa-file"></i> ${doc.name}</a>
          `
                )
                .join('')
            : 'None uploaded'}
        </div>
      </div>
    `;

    modalContent.innerHTML = `
      <div class="modal-header">
        <div class="modal-header-title">${personal_info.name}'s Application</div>
        <div class="modal-header-date"><i class="fas fa-calendar-day"></i> Submitted on ${formatDate(app.date)}</div>
        <span class="status-indicator status-${app.status.toLowerCase()}"><i class="fas fa-circle"></i> ${app.status}</span>
      </div>
      <div class="grid-container">
        <div class="card">
          <div class="card-title"><i class="fas fa-user"></i> Personal Information</div>
          <div class="preview-item">
            <strong><i class="fas fa-signature"></i> Full Name:</strong>
            <div class="preview-item-content">${personal_info.name}</div>
          </div>
          <div class="preview-item">
            <strong><i class="fas fa-envelope"></i> Email:</strong>
            <div class="preview-item-content">${personal_info.email}</div>
          </div>
          <div class="preview-item">
            <strong><i class="fas fa-phone"></i> Phone:</strong>
            <div class="preview-item-content">${personal_info.phone}</div>
          </div>
          <div class="preview-item">
            <strong><i class="fas fa-venus-mars"></i> Gender:</strong>
            <div class="preview-item-content">${personal_info.gender}</div>
          </div>
          <div class="preview-item">
            <strong><i class="fas fa-birthday-cake"></i> Date of Birth:</strong>
            <div class="preview-item-content">${personal_info.dob ? formatDate(personal_info.dob) : 'Not provided'}</div>
          </div>
          <div class="preview-item">
            <strong><i class="fas fa-heart"></i> Marital Status:</strong>
            <div class="preview-item-content">${personal_info.maritalStatus}</div>
          </div>
          <div class="preview-item">
            <strong><i class="fas fa-map-marker-alt"></i> Address:</strong>
            <div class="preview-item-content">${personal_info.street}, ${personal_info.zipcode}</div>
          </div>
        </div>
        <div class="card">
          <div class="card-title"><i class="fas fa-graduation-cap"></i> Education Details</div>
          ${educationHtml}
        </div>
        <div class="card">
          <div class="card-title"><i class="fas fa-briefcase"></i> Work Experience</div>
          ${workExpHtml}
        </div>
        <div class="card">
          <div class="card-title"><i class="fas fa-file-alt"></i> Documents</div>
          <div class="preview-item">
            <strong><i class="fas fa-file-pdf"></i> Resume:</strong>
            <div class="preview-item-content">
              ${documents.resume ? `<a href="${documents.resume.path}" class="file-link" target="_blank"><i class="fas fa-file-pdf"></i> ${documents.resume.name}</a>` : 'Not provided'}
            </div>
          </div>
          <div class="preview-item">
            <strong><i class="fas fa-id-card"></i> ID Proof:</strong>
            <div class="preview-item-content">
              ${documents.idProof ? `<a href="${documents.idProof.path}" class="file-link" target="_blank"><i class="fas fa-file"></i> ${documents.idProof.name}</a>` : 'Not provided'}
            </div>
          </div>
          <div class="preview-item">
            <strong><i class="fas fa-certificate"></i> Additional Certificates:</strong>
            <div class="preview-item-content">
              ${documents.certificates.length > 0
                ? documents.certificates
                    .map(
                      (doc) => `
                <a href="${doc.path}" class="file-link" target="_blank"><i class="fas fa-file"></i> ${doc.name}</a>
              `
                    )
                    .join('')
                : 'None uploaded'}
            </div>
          </div>
          <div class="preview-item">
            <strong><i class="fas fa-map-pin"></i> Current Location:</strong>
            <div class="preview-item-content">${documents.currentLocation}</div>
          </div>
          <div class="preview-item">
            <strong><i class="fas fa-map-marked-alt"></i> Preferred Location:</strong>
            <div class="preview-item-content">${documents.preferredLocation}</div>
          </div>
        </div>
      </div>
    `;
  }

  // Update Button Visibility Based on Status
  function updateButtonVisibility(status) {
    acceptBtn.style.display = status === 'Pending' ? 'inline-flex' : 'none';
    rejectBtn.style.display = status === 'Pending' ? 'inline-flex' : 'none';
  }

  // Close Modal
  function closeModal() {
    applicationModal.style.display = 'none';
    currentApplicationId = null;
    fileList.innerHTML = '';
    selectedFiles = [];
    fileUploadSection.style.display = 'none';
  }

  // Handle File Selection
  fileInput.addEventListener('change', () => {
    const files = Array.from(fileInput.files);
    const validTypes = [
      'application/pdf',
      'image/jpeg',
      'image/jpg',
      'image/png',
      'application/vnd.openxmlformats-officedocument.wordprocessingml.document',
    ];
    const maxSize = 10 * 1024 * 1024; // 10MB

    files.forEach((file) => {
      if (!validTypes.includes(file.type) && file.name !== '') {
        showError(`File ${file.name} is not a valid type (PDF, DOCX, JPG, PNG).`);
        return;
      }
      if (file.size > maxSize) {
        showError(`File ${file.name} exceeds 10MB limit.`);
        return;
      }
      selectedFiles.push(file);
    });

    renderFileList();
  });

  // Render Selected Files
  function renderFileList() {
    fileList.innerHTML = '';
    selectedFiles.forEach((file, index) => {
      const fileItem = document.createElement('div');
      fileItem.className = 'file-item';
      fileItem.innerHTML = `
        <div class="file-info">
          <i class="fas fa-file file-icon"></i>
          <i class="fas fa-${getFileIcon(file.name)}"></i>
          <span class="file-name">${file.name}</span>
          <span class="file-size">${formatFileSize(file.size)}</span>
        </div>
        <div class="file-actions">
          <i class="fas fa-trash file-delete" onclick="removeFile(${index})"></i>
        </div>
      `;
      fileList.appendChild(fileItem);
    });
  }

  // Remove Selected File
  function removeFile(index) {
    selectedFiles.splice(index, 1);
    renderFileList();
  }

  // Upload Offer Letter
  async function uploadOfferLetter() {
    if (!fileInput.files[0]) {
      showError('Please select a file to upload');
      return;
    }

    try {
      // Check if files already exist for this application
      const response = await fetch(`${BASE_URL}/api/applications/${currentApplicationId}/files`);
      const files = await response.json();
      if (!response.ok) throw new Error(files.error || 'Failed to fetch existing files');

      if (files.length > 0) {
        const confirmReplace = confirm(
          'Uploading a new file will replace all existing files for this application. Do you want to continue?'
        );
        if (!confirmReplace) {
          return;
        }
        // Delete all existing files
        for (const file of files) {
          const deleteResponse = await fetch(`${BASE_URL}/api/applications/files/${file.id}`, {
            method: 'DELETE',
          });
          if (!deleteResponse.ok) {
            const deleteError = await deleteResponse.json();
            throw new Error(deleteError.error || 'Failed to delete existing file');
          }
        }
      }

      const formData = new FormData();
      formData.append('files', fileInput.files[0]); // Use 'files' as the field name per server.js
      formData.append('applicationId', currentApplicationId);

      console.log(`Uploading offer letter for application ID ${currentApplicationId}`);
      uploadBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Uploading...';
      uploadBtn.disabled = true;
      const uploadResponse = await fetch(`${BASE_URL}/api/applications/upload`, {
        method: 'POST',
        body: formData,
      });
      console.log('Upload offer letter response status:', uploadResponse.status, uploadResponse.statusText);
      if (!uploadResponse.ok) {
        const errorData = await uploadResponse.json();
        throw new Error(errorData.error || `HTTP ${uploadResponse.status}`);
      }
      const result = await uploadResponse.json();
      console.log('Upload offer letter response:', result);
      showNotification('Offer letter uploaded successfully!');
      selectedFiles = [];
      fileList.innerHTML = '';
      fileInput.value = '';
      await fetchUploadedFiles(currentApplicationId);
      fetchApplications(currentPage);
    } catch (error) {
      console.error('Upload offer letter error:', error);
      let errorMessage = error.message;
      if (error.message.includes('LIMIT_FILE_SIZE')) {
        errorMessage = 'File exceeds the 10MB limit';
      } else if (error.message.includes('Only PDF, DOCX, JPG, JPEG, and PNG files are allowed')) {
        errorMessage = 'Only PDF, DOCX, JPG, JPEG, and PNG files are allowed';
      } else if (error.message.includes('Failed to fetch')) {
        errorMessage = 'Unable to connect to the server. Please ensure the server is running.';
      } else if (error.message.includes('CORS')) {
        errorMessage = 'CORS error: Please ensure the server allows requests from this origin.';
      } else if (error.message.includes('Application not found')) {
        errorMessage = 'Application not found';
      } else if (error.message.includes('Files can only be uploaded for accepted applications')) {
        errorMessage = 'Files can only be uploaded for accepted applications';
      }
      showError(errorMessage);
    } finally {
      uploadBtn.innerHTML = '<i class="fas fa-upload"></i> Upload Files';
      uploadBtn.disabled = false;
    }
  }

  // Fetch Uploaded Files
  async function fetchUploadedFiles(applicationId) {
    try {
      const response = await fetch(`${BASE_URL}/api/applications/${applicationId}/files`);
      const files = await response.json();

      if (!response.ok) throw new Error(files.error || 'Failed to fetch uploaded files');

      renderUploadedFiles(files);
    } catch (error) {
      console.error('Error fetching uploaded files:', error);
      showError('Failed to fetch uploaded files: ' + error.message);
    }
  }

  // Render Uploaded Files
  function renderUploadedFiles(files) {
    uploadedFilesList.innerHTML = '';
    if (files.length === 0) {
      uploadedFilesList.innerHTML = `
        <div style="text-align: center; color: var(--gray-500);">
          <i class="fas fa-info-circle"></i> No documents uploaded
        </div>
      `;
      return;
    }

    files.forEach((file) => {
      const fileItem = document.createElement('div');
      fileItem.className = 'file-item';
      fileItem.innerHTML = `
        <div class="file-info">
          <i class="fas fa-file file-icon"></i>
          <a href="${file.path}" class="file-name" target="_blank">${file.name}</a>
          <span class="file-size">${formatFileSize(file.size)}</span>
        </div>
        <div class="file-actions">
          <a href="${file.path}" download class="file-download"><i class="fas fa-download"></i></a>
          <i class="fas fa-trash file-delete" onclick="deleteUploadedFile('${file.id}')"></i>
        </div>
      `;
      uploadedFilesList.appendChild(fileItem);
    });
  }

  // Delete Uploaded File
  async function deleteUploadedFile(fileId) {
    if (!confirm('Are you sure you want to delete this file?')) return;

    try {
      const response = await fetch(`${BASE_URL}/api/applications/files/${fileId}`, {
        method: 'DELETE',
      });
      const data = await response.json();

      if (!response.ok) throw new Error(data.error || 'Failed to delete file');

      showNotification('File deleted successfully!');
      await fetchUploadedFiles(currentApplicationId);
    } catch (error) {
      console.error('Error deleting file:', error);
      showError('Failed to delete file: ' + error.message);
    }
  }

  // Update Application Status
  async function updateApplicationStatus(status) {
    try {
      const response = await fetch(`${BASE_URL}/api/applications/${currentApplicationId}`, {
        method: 'PATCH',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ status }),
      });
      const data = await response.json();

      if (!response.ok) throw new Error(data.error || `Failed to ${status.toLowerCase()} application`);

      showNotification(`Application ${status.toLowerCase()} successfully!`);
      if (status === 'Accepted') {
        fileUploadSection.style.display = 'block';
        await fetchUploadedFiles(currentApplicationId);
      }
      updateButtonVisibility(status);
      fetchApplications(currentPage);
      const statusIndicator = modalContent.querySelector('.status-indicator');
      statusIndicator.className = `status-indicator status-${status.toLowerCase()}`;
      statusIndicator.innerHTML = `<i class="fas fa-circle"></i> ${status}`;
    } catch (error) {
      console.error(`Error updating application status:`, error);
      showError(`Failed to ${status.toLowerCase()} application: ` + error.message);
    }
  }

  // Event Listeners
  searchInput.addEventListener('input', () => fetchApplications(1));
  statusFilter.addEventListener('change', () => fetchApplications(1));
  acceptBtn.addEventListener('click', () => updateApplicationStatus('Accepted'));
  rejectBtn.addEventListener('click', () => updateApplicationStatus('Rejected'));
  uploadBtn.addEventListener('click', uploadOfferLetter);

  // Drag and Drop Events
  const fileUploadLabel = document.querySelector('.file-upload-label');
  fileUploadLabel.addEventListener('dragover', (e) => {
    e.preventDefault();
    fileUploadLabel.style.borderColor = 'var(--success-500)';
    fileUploadLabel.style.backgroundColor = 'var(--success-50)';
  });

  fileUploadLabel.addEventListener('dragleave', () => {
    fileUploadLabel.style.borderColor = 'var(--success-300)';
    fileUploadLabel.style.backgroundColor = 'var(--surface-0)';
  });

  fileUploadLabel.addEventListener('drop', (e) => {
    e.preventDefault();
    fileUploadLabel.style.borderColor = 'var(--success-300)';
    fileUploadLabel.style.backgroundColor = 'var(--surface-0)';
    if (e.dataTransfer.files.length) {
      fileInput.files = e.dataTransfer.files;
      const event = new Event('change');
      fileInput.dispatchEvent(event);
    }
  });

  // Initialize
  fetchApplications();
</script>
</body>
</html>